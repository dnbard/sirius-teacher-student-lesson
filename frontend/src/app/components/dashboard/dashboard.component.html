<div class="dashboard-container">
  <nav class="navbar">
    <div class="navbar-content">
      <div class="navbar-brand">
        <h1>Sirius Music School</h1>
      </div>
      <div class="navbar-actions" *ngIf="currentUser">
        <div class="user-info">
          <span class="user-name">{{ currentUser.firstName }} {{ currentUser.lastName }}</span>
          <span class="user-role" [class]="'role-' + currentUser.role">{{ currentUser.role }}</span>
        </div>
        <button class="btn btn-logout" (click)="logout()">Logout</button>
      </div>
    </div>
  </nav>

  <main class="dashboard-content">
    <div class="welcome-section">
      <h2>Welcome back, {{ currentUser?.firstName }}!</h2>
      <p class="subtitle">You are logged in as <strong>{{ currentUser?.role }}</strong></p>
    </div>

    <div class="info-card">
      <h3>Authentication Successful</h3>
      <p>Your JWT token has been set in cookies and you are now authenticated.</p>
      
      <div class="user-details">
        <div class="detail-row">
          <span class="label">Email:</span>
          <span class="value">{{ currentUser?.email }}</span>
        </div>
        <div class="detail-row">
          <span class="label">Role:</span>
          <span class="value">{{ currentUser?.role }}</span>
        </div>
        <div class="detail-row">
          <span class="label">User ID:</span>
          <span class="value">{{ currentUser?.id }}</span>
        </div>
      </div>
    </div>

    <div class="notice-card" *ngIf="currentUser?.role === 'student' || currentUser?.role === 'teacher'">
      <div class="notice-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
      </div>
      <div class="notice-content">
        <h3>Dashboard In Progress</h3>
        <p>We're working hard to bring you an amazing dashboard experience!</p>
        <p>Currently, full dashboard functionality is available only for <strong>admin users</strong>. Student and Teacher dashboards are under active development and will be available soon.</p>
        <p class="notice-footer">Thank you for your patience! ðŸŽµ</p>
      </div>
    </div>

    <!-- Admin Users Table -->
    <div class="users-table-card" *ngIf="currentUser?.role === UserRole.ADMIN">
      <div class="card-header">
        <h3>Teachers and Students</h3>
        <p class="subtitle">Manage all users in the system</p>
      </div>

      <div class="loading-indicator" *ngIf="loading">
        <div class="spinner"></div>
        <p>Loading users...</p>
      </div>

      <div class="table-container" *ngIf="!loading">
        <table class="users-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Role</th>
              <th>Instrument</th>
              <th class="actions-column">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of usersTableData">
              <td>
                <div class="name-cell">
                  <div class="user-icon" [class.teacher-icon]="user.role === 'teacher'" [class.student-icon]="user.role === 'student'">
                    <!-- Teacher Icon -->
                    <svg *ngIf="user.role === 'teacher'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                      <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                    </svg>
                    <!-- Student Icon -->
                    <svg *ngIf="user.role === 'student'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                      <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                  </div>
                  <span class="user-name">{{ user.name }}</span>
                </div>
              </td>
              <td>
                <span class="role-badge" [class.role-teacher]="user.role === 'teacher'" [class.role-student]="user.role === 'student'">
                  {{ user.role }}
                </span>
              </td>
              <td>
                <div class="instrument-cell">
                  <span class="instrument-name">{{ user.instrument }}</span>
                  <span class="experience-badge" *ngIf="user.experience !== undefined">
                    {{ user.experience }} {{ user.experience === 1 ? 'year' : 'years' }}
                  </span>
                </div>
              </td>
              <td class="actions-cell">
                <button class="btn-action btn-delete" (click)="deleteUser(user)" [disabled]="loading" title="Delete {{ user.role }}">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    <line x1="10" y1="11" x2="10" y2="17"></line>
                    <line x1="14" y1="11" x2="14" y2="17"></line>
                  </svg>
                  Delete
                </button>
              </td>
            </tr>
          </tbody>
        </table>
        
        <div class="empty-state" *ngIf="usersTableData.length === 0">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
          <p>No users found</p>
        </div>
      </div>
    </div>
  </main>
</div>

